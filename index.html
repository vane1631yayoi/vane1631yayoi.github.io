<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—…éŠè¡Œç¨‹è¨ˆç•« - ç¾ä»£å¡ç‰‡è¦–è¦ºç‰ˆ</title>
    <!-- å¼•å…¥ Tailwind CSS ç¢ºä¿éŸ¿æ‡‰å¼è¨­è¨ˆå’Œæ¸…æ™°æ’ç‰ˆ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è¼‰å…¥ Inter å­—é«”ï¼Œç¢ºä¿æ¸…æ™°åº¦ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* æ·ºç°è‰²èƒŒæ™¯ */
            color: #1e293b; 
        }
        /* ä¸»é«”è‰²èª¿ï¼šæ·±è—/ç´« */
        .primary-bg {
            background-color: #4f46e5; /* é›è—è‰² */
        }
        .primary-text {
            color: #4f46e5;
        }
        /* å°è¦½æŒ‰éˆ•æ¨£å¼ */
        .tab-button {
            transition: all 0.2s;
            min-width: 130px;
            height: 80px;
            font-size: 1.125rem; /* text-lg */
        }
        .tab-active {
            box-shadow: 0 4px 14px rgba(79, 70, 229, 0.4);
            border: 2px solid white;
            transform: scale(1.05);
            font-weight: bold;
        }
        /* è¡Œç¨‹å¡ç‰‡æ¨£å¼ */
        .itinerary-card {
            border-left: 5px solid #4f46e5; 
            transition: all 0.2s;
        }
        /* å¯é»æ“Šåœ°åœ–çš„å…ƒç´ æ¨£å¼ */
        .map-clickable {
            cursor: pointer;
            text-decoration: underline;
            color: #1e40af; /* æ·±è—è‰² */
            font-weight: bold;
        }
        /* é£¯åº—è³‡è¨Šå¡ç‰‡ */
        .hotel-card {
            background-color: #eef2ff; /* æ·ºé›è—è‰² */
            border: 1px solid #c7d2fe;
        }
        /* æ–°å¢ï¼šæ¨¡æ…‹è¦–çª—æ¨£å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* åŠé€æ˜é»‘è‰²é®ç½© */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
            visibility: hidden; /* é è¨­éš±è— */
            opacity: 0; /* é è¨­å®Œå…¨é€æ˜ */
            transition: visibility 0.3s, opacity 0.3s;
        }
        .modal-overlay.show {
            visibility: visible;
            opacity: 1;
        }    
        .modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); /* shadow-2xl */
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto; /* å…§å®¹éå¤šæ™‚å¯æ»¾å‹• */
            position: relative;
            transform: translateY(-50px); /* åˆå§‹ä½ç½®ç¨å¾®å‘ä¸Š */
            transition: transform 0.3s ease-out;
        }      
        .modal-overlay.show .modal-content {
            transform: translateY(0); /* é¡¯ç¤ºæ™‚å›åˆ°æ­£å¸¸ä½ç½® */
        }
        /* é—œé–‰æŒ‰éˆ• */
        .modal-close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            color: #6b7280; /* text-gray-500 */
            transition: color 0.2s;
        }
        .modal-close-button:hover {
            color: #1f2937; /* text-gray-800 */
        }
        /* è¡Œææ¸…å–®é …ç›®æ¨£å¼ */
        .luggage-item-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 0.5rem 0;
        }
        .luggage-item-checkbox {
            margin-right: 0.75rem;
            width: 1.25rem; /* h-5 w-5 */
            height: 1.25rem;
            accent-color: #4f46e5; /* primary-blue */
        }
        .luggage-item-text {
            flex-grow: 1;
            font-size: 1rem;
            color: #374151; /* text-gray-700 */
        }
        .luggage-item-text.checked {
            text-decoration: line-through;
            color: #9ca3af; /* text-gray-400 */
        }        
            
    </style>
    <script>
        // è¨­å®š Tailwind é…ç½®ä»¥ä½¿ç”¨è‡ªå®šç¾©é¡è‰²
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#4f46e5',
                        'secondary-card': '#eef2ff',
                    },
                }
            }
        }
    </script>
</head>
<body>
    
    <!-- JS å‡½å¼ï¼šé–‹å•Ÿ Google Map -->
    <script>
        /**
         * é–‹å•Ÿ Google Map æœå°‹æŒ‡å®šåœ°é»
         * @param {string} query - åœ°åœ–æœå°‹çš„é—œéµå­—
         */
        window.openGoogleMap = function(query) {
            if (query) {
                const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
                window.open(url, '_blank');
            }
        };
    </script>

    <!-- ä¸» Header å€åŸŸ (æ¨¡æ“¬åœ–ç‰‡é ‚éƒ¨) -->
    <header class="primary-bg p-6 pb-20 shadow-2xl relative">
        <div class="max-w-4xl mx-auto">
            <div>
                <h1 class="text-3xl font-extrabold text-white">
                    âœˆï¸ åå¤å±‹ä¹‹æ—…
                </h1>
                <p class="text-lg text-indigo-200 mt-1">
                    3æœˆ13æ—¥ - 3æœˆ19æ—¥
                </p>
            </div>
            <a href="#" onclick="openLuggageChecklist(); return false;" 
                class="absolute top-6 right-6 md:right-10 text-white hover:text-indigo-200 transition-colors duration-200"
                title="è¡Œæç¢ºèªæ¸…å–®">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                </svg>
            </a>
        </div>
    </header>

    <!-- æ—¥æœŸåˆ‡æ› Tab å€ (å›ºå®šåœ¨é ‚éƒ¨ä¸‹æ–¹ï¼Œå¯å·¦å³æ»‘å‹•) -->
    <div class="sticky top-0 z-30 bg-primary-bg">
        <nav id="day-tabs" class="flex overflow-x-auto whitespace-nowrap p-2 -mt-12 max-w-4xl mx-auto">
            <!-- Tab æŒ‰éˆ•å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ -->
        </nav>
    </div>

    <main id="itinerary-container" class="max-w-4xl mx-auto p-4 md:p-8 -mt-12">
        <!-- è¡Œç¨‹å…§å®¹å°‡ç”± JavaScript æ¸²æŸ“ -->
    </main>

    <footer class="p-6 mt-8 bg-gray-700 text-white text-center">
        <p class="text-base">ç¥æ‚¨æ—…é€”å¹³å®‰æ„‰å¿«ï¼</p>
    </footer>
    
    <!-- æ–°å¢ï¼šè¡Œææ¸…å–®æ¨¡æ…‹è¦–çª— -->
    <div id="luggage-checklist-modal" class="modal-overlay">
        <div class="modal-content w-11/12 md:w-2/3 lg:w-1/2">
            <span class="modal-close-button" onclick="openLuggageChecklist(false);">&times;</span>
            <h2 class="text-2xl font-bold primary-text mb-4">ğŸ“¦ è¡Œæç¢ºèªæ¸…å–®</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-2">æ‰‹æè¡Œæ (Carry-on)</h3>
                <div id='carry-on-list' class="space-y-2">
                </div>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">æ‰˜é‹è¡Œæ (Checked Baggaue)</h3>
                <div id='checked-baggage-list' class="space-y-2">
                </div>
            </div>
            <div class="mt-6 text-sm text-gray-500">
                <p>æœ€å¾Œæ›´æ–°ï¼š<span id="last-updated-time"></span></p>
                <p>ç‹€æ…‹æœƒè‡ªå‹•å„²å­˜ã€‚</p>
            </div>
        </div>
    </div>            
                    
    

    <script>
        const HOTEL_NAME = "Fresa Inn (INN åå¤å±‹é§…æ«»é€šå£)";
        const HOTEL_ADDRESS = "4 Chome-4-15 Meieki, Nakamura Ward, Nagoya, Aichi 450-0002æ—¥æœ¬";
        const HOTEL_MAP_QUERY = "Fresa Inn åå¤å±‹é§…æ«»é€šå£";
        
        const LUGGAGE_CHECKLIST_DATA = {
            carryOn: [
                { id: 'passport', name: 'è­·ç…§', checked: false },
                { id: 'insurance', name: 'ä¸ä¾¿éšª (é†«ç™‚éšªå»ºè­°ä¿æ—¥æœ¬æ”¿åºœ)', checked: false},
                { id: 'photo', name: 'å¤§é ­ç…§/è­·ç…§', checked: false},
                { id: 'phone', name: 'æ‰‹æ©Ÿ', checked: false},
                { id: 'money', name: 'æ—¥å¹£ç¾é‡‘', checked: false},
                { id: 'card', name: 'ä¿¡ç”¨å¡', checked: false},
                { id: 'charger', name: 'å……é›»å™¨/è¡Œå‹•é›»æº/iPad', checked: false},
                { id: 'internet', name: 'æ¼«éŠ/esim/sim', checked: false}

            ],
            checkedBaggage: [
                { id: 'clothes', name: 'æ›¿æ›è¡£ç‰©(é£¯åº—æœ‰æ´—è¡£æ©Ÿ)', checked: false },
                { id: 'warmer', name: 'ä¿æš–è¡£ç‰©/å¸½å­/åœå·¾(å¯ç•¶åœ°è³¼å…¥)', checked: false },
                { id: 'bag', name: 'å£“ç¸®è¢‹/è¡Œæè¢‹', checked: false },                
                { id: 'booth', name: 'å€‹äººè¡›ç”Ÿç”¨å“(é£¯åº—æœ‰æ´—æ¼±ç”¨å“)', checked: false },                
                { id: 'umbrella', name: 'å‚˜(ä¾å¤©æ°£æ±ºå®šï¼Œå¯ç•¶åœ°è²·)', checked: false },                               
                                
                
            ]
        };

        
        // çµ±ä¸€çš„æ•¸æ“šçµæ§‹ (åŒ…å«åœ°åœ–æŸ¥è©¢é—œéµå­—)
        const travelItinerary = [
            {
                day: "Day 1",
                date: "3/13 (äº”)",
                theme: "TPEå•Ÿç¨‹èˆ‡æŠµé”åå¤å±‹",
                weather: "æ™´æœ—, 18Â°C",
                events: [
                    { time: "15:15", activity: "æ¡ƒåœ’æ©Ÿå ´ç¬¬äºŒèˆªå»ˆé›†åˆ", note: "è«‹ç¢ºèªæ‰‹æ©Ÿ/è­·ç…§/é›»å­æ©Ÿç¥¨", location: "æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ ç¬¬äºŒèˆªå»ˆ" },
                    { time: "17:15", activity: "TPE èµ·é£›", note: "ç­æ©Ÿä»£è™Ÿ:CI150" },
                    { time: "19:00", activity: "æ™šé¤", note: "é£›æ©Ÿé¤" },
                    { time: "21:05", activity: "æŠµé”åå¤å±‹", note: "é ˜å–è¡Œæï¼Œæº–å‚™ VISIT JAPAN QR CODE", location: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´" },
                    { time: "21:37", activity: "è½‰ä¹˜åéµ", note: "éœ€è¦è²·å°è™Ÿåº§", location: "åå¤å±‹è»Šç«™" },
                    { time: "22:57", activity: "å…¥ä½ " + HOTEL_NAME, note: "ä¸­å¤®å‰ªç¥¨å£å‡ºç«™èµ°4åˆ†é˜", location: HOTEL_MAP_QUERY }
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 2",
                date: "3/14 (å…­)",
                theme: "æ–‡åŒ–èˆ‡æ­·å²æ¢ç´¢",
                weather: "å¤šé›², 15Â°C",
                events: [
                    { time: "8:00", activity: "æ—©é¤", note: "Komedaå®¢å¤šç¾å’–å•¡ OR SHINPACHIæ—¥å¼çƒ¤é­šæ—©é¤"},
                    { time: "9:30", activity: "åå¤å±‹ç§‘å­¸é¤¨", note: "æå‰è²·å…­/æ—¥çš„å‘¨æœ«ç’°ä¿åˆ¸(å¯æ­åœ°éµ/å·´å£«)", location: "åå¤å±‹ç§‘å­¸é¤¨" },
                    { time: "12:00", activity: "åˆé¤", note: "é£›é¨¨ç‰›ç‡’è‚‰ åˆé–“å¥—é¤", location: "ç‡’è‚‰ é¦¬å–°ä¸€ä»£ åå¤å±‹EAST" },
                    { time: "13:30", activity: "ç†±ç”°ç¥å®®", note: "æ­ä¹˜ååŸç·šå‰å¾€ ç†±ç”°ç¥å®®è¥¿", location: "ç†±ç”°ç¥å®®" },
                    { time: "14:30", activity: "ç†±ç”°ç¥å®® å¯¶ç‰©é¤¨", note: "500æ—¥åœ“é–€ç¥¨", location: "ç†±ç”°ç¥å®® å¯¶ç‰©é¤¨" },
                    { time: "16:00", activity: "Aeonè³¼ç‰© æˆ– æ¦®ç”ºé€›è¡—", note: "Aeonæœ‰è¶…å¸‚/æ¦®æœ‰ç™¾è²¨" },
                    { time: "19:00", activity: "æ™šé¤", note: "å¾·å…µè¡›è¿´è½‰å£½å¸ OR ç¾ç™»åˆ©å£½å¸" }
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 3",
                date: "3/15 (æ—¥)",
                theme: "å‰åœåŠ›å…¬åœ’ä¹‹æ—…(æ”œå¸¶è­·ç…§)",
                weather: "æ™´æœ—, 16Â°C",
                events: [
                    { time: "7:00", activity: "æ—©é¤", note: "ä¾¿åˆ©å•†åº— OR å‰ä¸€å¤©å…ˆè²·" },
                    { time: "7:30", activity: "åå¤å±‹è»Šç«™ --> è—¤ä¸˜(æ±å±±ç·š) --> æ„›åœ°çƒç´€å¿µå…¬åœ’(LINIMO)", note: "ä½¿ç”¨å‘¨æœ«ç’°ä¿åˆ¸+SUICA", location: "åå¤å±‹è»Šç«™" },
                    { time: "9:00", activity: "å‰åœåŠ›å…¬åœ’ å¤§å€‰åº«", note: "é ˆå¸¶è­·ç…§é©—ç¥¨", location: "Ghibliâ€™s Grand Warehouse" },
                    { time: "12:00", activity: "åˆé¤", note: "åœ’å€å…§çš„MOS Burge", location: "ãƒ¢ã‚¹ãƒãƒ¼ã‚¬ãƒ¼ ã‚­ãƒƒãƒãƒ³ã‚«ãƒ¼KC3" },
                    { time: "12:30", activity: "é­”å¥³ä¹‹è°·", note: "é­”å¥³ä¹‹å®¶ (å®‰é›…èˆ‡é­”å¥³)/ éœçˆ¾çš„ç§»å‹•åŸå ¡/ æ­å¥‡è«¾ä¹‹å®¶ (å¤©ç©ºä¹‹åŸ)", location: "é­”å¥³ã®è°·" },
                    { time: "15:00", activity: "å‹•å‹•åŠ›ä¹‹æ£® (æ­å…¬è»Š)", note: "å°æœˆèˆ‡å°æ¢…ä¹‹å®¶" , location: "ã©ã‚“ã©ã“æ£®"},
                    { time: "15:30", activity: "é­”æ³•ä¹‹é‡Œ(æ­å…¬è»Š)", note: "æ™‚é–“ä¸å¤ å¯è·³é" , location: "ã‚‚ã®ã®ã‘ã®é‡Œ" },
                    { time: "16:20", activity: "é’æ˜¥ä¹‹ä¸˜" , note: "è²“å’ªäº‹å‹™æ‰€(è²“çš„å ±æ©)/ åœ°çƒå±‹(å¿ƒä¹‹è°·)" , location: "é’æ˜¥ã®ä¸˜" },
                    { time: "19:30", activity: "æ™šé¤ (è¿‘æ¸…æ°´ç«™)", note: "ä¸²éŠ€ åŠ(çƒ¤é›è‚‰ä¸²) OR ãªã¾ã‚‰ã‚€ãƒ¼ã¡ã‚‡(ç¾Šè‚‰ç‡’è‚‰)", location: "ãªã¾ã‚‰ã‚€ãƒ¼ã¡ã‚‡" }
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 4",
                date: "3/16 (ä¸€)",
                theme: "çŠ¬å±±åŸä¹‹æ—…",
                weather: "å¤šé›², 15Â°C",
                events: [
                    { time: "8:20", activity: "æ—©é¤ + åƒåŠ å…­ä¹‹å¸‚", note: "åˆ·SUICAæ­åéµç·šåˆ° æœ¬ç¬ å¯º(4è™Ÿæœˆå°)", location: "ç¬ å¯ºè¦³éŸ³ï¼ˆç¬ è¦†å¯ºï¼‰"  },
                    { time: "9:00", activity: "Workmanæ¡è²·é˜²æ°´è£å‚™", note: "é˜²æ°´é‹/ é˜²é¢¨é˜²æ°´å¤–å¥—", location: "ãƒ¯ãƒ¼ã‚¯ãƒãƒ³ åå¤å±‹ç¬ å¯ºåº—" },
                    { time: "11:00", activity: "åˆé¤ ", note: "harbs åˆé–“å¥—é¤(ä¸èƒ½è¨‚ä½)", location: "ãƒãƒ¼ãƒ–ã‚¹ æ „æœ¬åº—" },
                    { time: "12:30", activity: "è²·çŠ¬å±±åŸå¥—ç¥¨", note: "åéµå”®ç¥¨å£ï¼Œé †ä¾¿å»è²·è‰¾è¨±å¥¶æ²¹æ³¡èŠ™", location: "åå¤å±‹è»Šç«™" },
                    { time: "13:40", activity: "çŠ¬å±±åŸ", note: "æ­ç‰¹æ€¥åˆ°çŠ¬å±±éŠåœ’åœ°", location: "çŠ¬å±±åŸ" },
                    { time: "15:00", activity: "åŸä¸‹ç”ºé€›è¡—", note: "ä¸‰å…‰ç¨»è·ç¥ç¤¾ é«”é©—æ´—éŒ¢(100ç¾Š)" },
                    { time: "17:00", activity: "æ™šé¤", note: "è“¬ãœã‚“ é°»é­šæ–™, é †è·¯è²· å°¾å¼µçŠ¬å±±è“åŒ ", location:"è“¬ãœã‚“ é°»é­šæ–™ç†" }
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 5",
                date: "3/17 (äºŒ)",
                theme: "ä¸­å±±é“ - å¦»ç± å®¿èˆ‡é¦¬é¾å®¿",
                weather: "é™£é›¨, 12Â°C",
                events: [
                    { time: "7:30", activity: "æ—©é¤", note: "å‰ä¸€å¤©å…ˆé»é¤ï¼Œè»Šä¸Šåƒ", location: "ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰ åå¤å±‹ã‚²ãƒ¼ãƒˆã‚¦ã‚©ãƒ¼ã‚¯åº—" },
                    { time: "8:00", activity: "äº¤é€š (å‰å¾€é¦¬ç± )", note: "æ­ä¹˜JRä¿¡æ¿ƒ åˆ°ä¸­å·æ´¥è»Šç«™ -> è½‰æ­ Magomeå·´å£« åˆ° Magome " },
                    { time: "9:35", activity: "é¦¬ç± å®¿ æ•£æ­¥", note: "å¯ä»¥è²·ä¸­å±±é“è­‰æ˜", location: "é¦¬ç± å®¿" },
                    { time: "10:30", activity: "åˆé¤", note: "ãŠé£Ÿäº‹å‡¦ æ¨¹æ¢¨, ä¸é¤“å¯ä»¥ä¸åƒæˆ–é»äº”å¹³é¤…ç­‰å°æ±è¥¿", location: "ãŠé£Ÿäº‹å‡¦ æ¨¹æ¢¨" },
                    { time: "11:30", activity: "é¦¬ç± å®¿ èµ°åˆ° å¦»ç± å®¿", note: "6.5km" },
                    { time: "14:30", activity: "å¦»ç± å®¿ æ•£æ­¥", note: "å¯è“‹ç« ä¸­å±±é“è­‰æ˜", location: "GOOD DAY Cafe" },                    
                    { time: "15:20", activity: "äº¤é€š(å›åå¤å±‹è»Šç«™)", note: "æ­é«˜é€Ÿå·´å£« éœ€é ç´„" , location: "ã€’399-5302 é•·é‡çœŒæœ¨æ›½éƒ¡å—æœ¨æ›½ç”ºå¾å¦»"},
                    { time: "17:30", activity: "æ™šé¤", note: "çŸ¢å ´è±¬æ’ or æ³•å¼è±¬æ’ katuretu matumura or é›ç¿… ä¸–ç•Œçš„å±±åŒ ", location: "ã‚«ãƒ„ãƒ¬ãƒ„MATUMURA" },
                    { time: "æœ‰åŠ›æ°£çš„è©±", activity: "æ³¡æ¹¯", note: "Canal resort(åå¤å±‹é§›) or Urban Quar(æ¦®)æ³¡æ¹¯ï¼Œæœ‰ç„¡æ–™é€è¿å·´å£«!", location: "ã‚­ãƒ£ãƒŠãƒ«ãƒ»ãƒªã‚¾ãƒ¼ãƒˆ" }                  
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 6",
                date: "3/18 (ä¸‰)",
                theme: "å¸‚é›†+é€›è¡—æ—¥",
                weather: "æ™´æœ—, 17Â°C",
                events: [
                    { time: "7:50", activity: "æ—©é¤", note: "æˆ‘å…ˆææ—©å»æ’éšŠ", location: "å¤©ç„¶é…µæ¯ã®é£Ÿãƒ‘ãƒ³å°‚é–€åº— ã¤ã°ã‚ãƒ‘ãƒ³ï¼†Milk åé§…åº—" },
                    { time: "9:30", activity: "å¤§é ˆè§€éŸ³éª¨è‘£å¸‚é›† + å•†åœˆ", note: "é’æŸ³ç¸½æœ¬å®¶/ç¯‰åœ°éŠ€ç« é­š/è¦ºç‹å±±æ°´æœå¤§ç¦/osu bakery", location: "å¤§é ˆè¦³éŸ³" },
                    { time: "11:30", activity: "åˆé¤", note: "å¤§é ˆè§€éŸ³ suzuyaç‚¸è±¬æ’(è¦æ’éšŠ) OR é‡‘å±± ç‡’è‚‰äºŒéƒ(å¯é ç´„)", location: "ç„¼è‚‰&æ‰‹æ‰“ã¡å†·éºº äºŒéƒ KANAYAMA" },
                    { time: "ä¸‹åˆæ™‚æ®µ", activity: "è‡ªç”±æ´»å‹•/æ•´ç†è¡Œæ", note: "é ç•™å……è¶³æ™‚é–“æ•´ç†è¡Œæèˆ‡ä¼‘æ¯" },
                    { time: "17:00", activity: "æ™šé¤", note: "è‡ªè¡Œè™•ç†" }
                ],
                hotel: HOTEL_ADDRESS,
                hotelMapQuery: HOTEL_MAP_QUERY
            },
            {
                day: "Day 7",
                date: "3/19 (å››)",
                shortDate: "3/19",
                theme: "ğŸ‘‹ æ­¸ç¨‹æ—¥",
                weather: "æ™´æœ—, 19Â°C",
                events: [
                    { time: "8:00", activity: "Check out", note: "æª¢æŸ¥æ‰‹æ©ŸéŒ¢åŒ…è­·ç…§ & è¡Œæç§¤é‡" },
                    { time: "8:30", activity: "æ­ä¹˜åéµç‰¹æ€¥(éƒ¨åˆ†å°è™Ÿåº§)åå¤å±‹æ©Ÿ", note: "å¯åˆ·suicaåè‡ªç”±åº§" },
                    { time: "9:11", activity: "è¯èˆª CHECK IN ", location: "æŠµé”åå¤å±‹æ©Ÿå ´ ç¬¬ä¸€èˆªå»ˆ" },
                    { time: "9:30", activity: "æ©Ÿå ´æ¡è³¼", note: "ä»™è²è¦ä¹‹é‡Œ", location: "ä»™è²è¦ä¹‹é‡Œ" },
                    { time: "10:00", activity: "åˆé¤", note: "T1 4Fæœ‰å¾ˆå¤šé¸æ“‡", location:"åŠè—è£½éºµ" },
                    { time: "10:30", activity:"éå®‰æª¢", note: "å¾Œé¢æœ‰å…ç¨…è³¼ç‰©" },
                    { time: "11:25", activity: "ç™»æ©Ÿ", note: "12:05 èµ·é£›" },
                    { time: "14:40", activity: "TPE é™è½", note: "å¹³å®‰æŠµé”å°ç£", location: "æ¡ƒåœ’åœ‹éš›æ©Ÿå ´" }
                ],
                hotel: "æœ¬æ—¥ç‚ºè¿”ç¨‹æ—¥ï¼Œç„¡ä½å®¿å®‰æ’ã€‚ç¥æ‚¨æ—…é€”é †åˆ©ï¼",
                hotelMapQuery: null 
            }
        ];

        const container = document.getElementById('itinerary-container');
        const tabsContainer = document.getElementById('day-tabs');

        /**
         * æ¸²æŸ“ç‰¹å®šæ—¥æœŸçš„è¡Œç¨‹
         * @param {number} dayIndex - è¡Œç¨‹åœ¨ travelItinerary é™£åˆ—ä¸­çš„ç´¢å¼• (0 = Day 1)
         */
        function renderItinerary(dayIndex) {
            const dayPlan = travelItinerary[dayIndex];
            
            // æ¸…ç©ºèˆŠå…§å®¹
            container.innerHTML = ''; 

            // 1. é ‚éƒ¨æ—¥æœŸ/å¤©æ°£å¡ç‰‡ (æ¨¡æ“¬åœ–ç‰‡é¢¨æ ¼)
            const dateWeatherCard = document.createElement('div');
            dateWeatherCard.className = 'bg-white p-6 rounded-xl shadow-lg flex justify-between items-center mb-6';
            dateWeatherCard.innerHTML = `
                <div>
                    <p class="text-3xl font-extrabold primary-text">${dayPlan.date}</p>
                    <p class="text-xl text-gray-700">${dayPlan.theme}</p>
                </div>
                <div class="text-right">
                    <p class="text-4xl text-yellow-500">â˜€ï¸</p>
                    <p class="text-2xl font-bold primary-text">${dayPlan.weather.split(',')[1] || '17Â°C'}</p>
                    <p class="text-sm text-gray-500">${dayPlan.weather.split(',')[0] || 'æ™´æœ—'}</p>
                </div>
            `;
            container.appendChild(dateWeatherCard);

            // 2. å‰µå»ºæ´»å‹•åˆ—è¡¨
            dayPlan.events.forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'itinerary-card bg-white p-4 rounded-xl shadow-md mb-4 flex space-x-4 items-start';
                
                // è™•ç†æ´»å‹•åç¨±ï¼šå¦‚æœæ˜¯æ™¯é»ï¼Œå‰‡å¯é»æ“Š
                let activityHTML;
                const activityIcon = event.activity.includes("äº¤é€š") ? 'ğŸš—' : 
                                    event.activity.includes("é¤") || event.activity.includes("äº«ç”¨æ—©é¤") ? 'ğŸ½ï¸' : 
                                    event.activity.includes("æ©Ÿå ´") || event.activity.includes("ç™»æ©Ÿ") ? 'âœˆï¸' : 
                                    event.activity.includes("è³¼ç‰©") || event.activity.includes("æ¡è³¼") ? 'ğŸ›ï¸' : 
                                    'ğŸ“';

                if (event.location) {
                    // ä½¿ç”¨ span å…ƒç´ æ¨¡æ“¬é€£çµï¼Œä¸¦ç¶å®šé»æ“Šäº‹ä»¶
                    activityHTML = `
                        <span class="text-lg map-clickable hover:opacity-80 transition-opacity leading-snug" 
                              onclick="openGoogleMap('${event.location.replace(/'/g, "\\'")}')">
                            ${event.activity}
                        </span>
                    `;
                } else {
                    activityHTML = `<p class="text-lg font-bold text-gray-800 leading-snug">${event.activity}</p>`;
                }

                eventCard.innerHTML = `
                    <!-- å·¦å´ï¼šæ™‚é–“èˆ‡åœ–æ¨™ -->
                    <div class="flex-shrink-0 text-center w-20">
                        <p class="text-lg font-bold text-gray-600">${event.time}</p>
                        <p class="text-2xl mt-1">${activityIcon}</p>
                    </div>
                    
                    <!-- å³å´ï¼šæ´»å‹•å…§å®¹èˆ‡å‚™è¨» -->
                    <div class="flex-1 min-w-0">
                        ${activityHTML}
                        <!-- å‚™è¨» -->
                        <p class="mt-1 text-base text-gray-500 font-medium leading-snug">â–¶ ${event.note}</p>
                    </div>
                `;
                container.appendChild(eventCard);
            });

            // 3. é¡¯ç¤ºé£¯åº—åœ°å€å¡ç‰‡
            const hotelCard = document.createElement('div');
            hotelCard.className = 'hotel-card mt-8 p-6 rounded-xl shadow-lg';
            
            if (dayIndex === travelItinerary.length - 1) { // è™•ç†æœ€å¾Œä¸€å¤©è¿”ç¨‹æ—¥
                hotelCard.innerHTML = `
                    <p class="text-xl font-bold primary-text">âœ… ç•¶æ—¥è¡Œç¨‹å‚™è¨»</p>
                    <p class="text-lg mt-2 text-gray-700">${dayPlan.hotel}</p>
                `;
            } else { // é¡¯ç¤ºä½å®¿åœ°å€ï¼Œä½¿å…¶å¯é»æ“Š
                hotelCard.innerHTML = `
                    <p class="text-xl font-bold primary-text">ğŸ  ç•¶æ™šå…¥ä½é£¯åº— (é»æ“Šåœ°åœ–)</p>
                    <p class="text-lg font-semibold mt-2 map-clickable hover:opacity-80 transition-opacity"
                       onclick="openGoogleMap('${dayPlan.hotelMapQuery.replace(/'/g, "\\'")}')">
                        ${HOTEL_NAME}
                    </p>
                    <p class="text-base mt-1 leading-relaxed text-gray-600">${dayPlan.hotel}</p>
                `;
            }
            container.appendChild(hotelCard);

            // å°‡è¦–çª—æ²å‹•åˆ°è¡Œç¨‹å…§å®¹é ‚éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        /**
         * è™•ç†é»æ“Šäº‹ä»¶ï¼šåˆ‡æ›é¸ä¸­çš„ Tab å’Œé¡¯ç¤ºå…§å®¹
         */
        function selectDay(dayIndex) {
            // 1. æ›´æ–°æŒ‰éˆ•çš„ Active ç‹€æ…‹
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('tab-active', 'primary-bg');
                btn.classList.add('bg-white', 'text-gray-800');
            });
            // ç‚ºç•¶å‰é»æ“Šçš„æŒ‰éˆ•æ·»åŠ  active æ¨£å¼
            const currentBtn = document.getElementById(`day-tab-${dayIndex}`);
            if (currentBtn) {
                currentBtn.classList.remove('bg-white', 'text-gray-800');
                currentBtn.classList.add('tab-active', 'primary-bg', 'text-white');
                
                currentBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }

            // 2. æ¸²æŸ“å°æ‡‰çš„è¡Œç¨‹å…§å®¹
            renderItinerary(dayIndex);
        }

        /**
         * å‹•æ…‹ç”Ÿæˆé ‚éƒ¨çš„ Tab æŒ‰éˆ•ä¸¦ç¶å®šäº‹ä»¶
         */
        function setupTabs() {
            travelItinerary.forEach((dayPlan, index) => {
                const button = document.createElement('button');
                button.id = `day-tab-${index}`;
                // åˆå§‹æ¨£å¼
                button.className = 'tab-button bg-white text-gray-800 rounded-xl shadow-md p-3 mx-2 flex-shrink-0';
                button.innerHTML = `
                    <p class="text-sm text-gray-500">${dayPlan.date.split(' ')[0]}</p>
                    <p class="text-lg font-semibold">${dayPlan.day}</p>
                `;
                
                // é»æ“Šäº‹ä»¶ï¼šå‘¼å« selectDay å‡½å¼
                button.addEventListener('click', () => selectDay(index));
                
                tabsContainer.appendChild(button);
            });
            
            // é è¨­é¸ä¸­ä¸¦é¡¯ç¤º Day 1
            selectDay(0);
        }
        
        // æ–°å¢ï¼šè¡Œææ¸…å–®ç›¸é—œå‡½å¼
        window.openLuggageChecklist = function(show) {
            const modal = document.getElementById('luggage-checklist-modal');
            const isShowing = modal.classList.contains('show');
            if (show === undefined){
                show = !isShowing;
            }
            if (show) {
                renderLuggageChecklist();
                modal.classList.add('show');
                document.body.style.overflow = 'hidden'; //é˜²æ­¢èƒŒæ™¯æ»¾å‹•
                document.getElementById('last-updated-time').textContent = new Date().toLocaleString();
            } else {
                modal.classList.remove('show');
                document.body.style.overflow = '';
            }
        };
        
        function renderLuggageChecklist() {
            const carryOnListDiv = document.getElementById('carry-on-list');
            const checkedBaggageListDiv = document.getElementById('checked-baggage-list');
            carryOnListDiv.innerHTML = '';
            checkedBaggageListDiv.innerHTML = '';

            LUGGAGE_CHECKLIST_DATA.carryOn.forEach(item => {
                carryOnListDiv.appendChild(createLuggageItemElement(item, 'carryOn'));
            });
            LUGGAGE_CHECKLIST_DATA.checkedBaggage.forEach(item => {
                checkedBaggageListDiv.appendChild(createLuggageItemElement(item, 'checkedBaggage'));
            });                    
        }


        function createLuggageItemElement(item, type) {
            const div = document.createElement('div');
            div.className = 'luggage-item';
            div.innerHTML = `
                <label for="luggage-${type}-${item.id}" class="luggage-item-label">
                    <input type="checkbox" 
                           id="luggage-${type}-${item.id}" 
                           class="luggage-item-checkbox" 
                           ${item.checked ? 'checked' : ''} 
                           onchange="toggleLuggageItem('${type}', '${item.id}')">
                    <span class="luggage-item-text ${item.checked ? 'checked' : ''}">${item.name}</span>
                </label>
            `;
            return div;
        }

        window.toggleLuggageItem = function(type, itemId) {
            const list = LUGGAGE_CHECKLIST_DATA[type];
            const item = list.find(i => i.id === itemId);
            if (item) {
                item.checked =  !item.checked;
                saveLuggageState();
                renderLuggageChecklist();
            }
        };
        
                    
        const LOCAL_STORAGE_KEY = 'travelLuggageState';

        function loadLuggageState(){
            const savedState = localStorage.getItem(LOCAL_STORAGE_KEY);
            if (savedState) {
                const parsedState = JSON.parse(savedState);
                LUGGAGE_CHECKLIST_DATA.carryOn.forEach(item => {
                    const savedItem = parsedState.carryOn.find(s => s.id === item.id);
                    if (savedItem){
                        item.checked = savedItem.checked;
                    }
                });
                LUGGAGE_CHECKLIST_DATA.checkedBaggage.forEach(item => {
                    const savedItem = parsedState.checkedBaggage.find(s => s.id === item.id);
                    if (savedItem) {                               
                        item.checked = savedItem.checked;
                    }
                });
            }
        }
            
        function saveLuggageState() {
            localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(LUGGAGE_CHECKLIST_DATA));
        }
                
            
            
                

            
                
            
        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œè¨­å®š
        window.onload = function(){
            setupTabs();
            loadLuggageState();
        };
                        

    </script>
</body>
</html>

